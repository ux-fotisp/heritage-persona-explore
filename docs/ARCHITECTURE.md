# CulturaPath Architecture

> Technical architecture diagrams and system design documentation.

---

## Table of Contents

1. [System Architecture](#system-architecture)
2. [Component Architecture](#component-architecture)
3. [Data Flow Diagrams](#data-flow-diagrams)
4. [Recommendation Engine](#recommendation-engine)
5. [Storage Architecture](#storage-architecture)

---

## System Architecture

### High-Level Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         CULTURAPATH SYSTEM ARCHITECTURE                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚                        PRESENTATION LAYER                           â”‚    â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚
â”‚   â”‚  â”‚    Pages    â”‚  â”‚  Components â”‚  â”‚    UI Kit   â”‚  â”‚   Hooks   â”‚  â”‚    â”‚
â”‚   â”‚  â”‚  (Routes)   â”‚  â”‚  (Features) â”‚  â”‚ (shadcn/ui) â”‚  â”‚ (Custom)  â”‚  â”‚    â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                      â”‚                                       â”‚
â”‚                                      â–¼                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚                        APPLICATION LAYER                            â”‚    â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚
â”‚   â”‚  â”‚  Recommendation â”‚  â”‚     Persona     â”‚  â”‚       Trip          â”‚ â”‚    â”‚
â”‚   â”‚  â”‚     Engine      â”‚  â”‚    Management   â”‚  â”‚    Management       â”‚ â”‚    â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚
â”‚   â”‚  â”‚   Evaluation    â”‚  â”‚      Study      â”‚  â”‚    Notification     â”‚ â”‚    â”‚
â”‚   â”‚  â”‚      Flow       â”‚  â”‚    Analytics    â”‚  â”‚      System         â”‚ â”‚    â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                      â”‚                                       â”‚
â”‚                                      â–¼                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚                        OOUX CORE OBJECTS                            â”‚    â”‚
â”‚   â”‚                                                                      â”‚    â”‚
â”‚   â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚    â”‚
â”‚   â”‚     â”‚              â”‚     â”‚              â”‚     â”‚              â”‚      â”‚    â”‚
â”‚   â”‚     â”‚   PERSONA    â”‚â”€â”€â”€â”€â–¶â”‚ HERITAGE SITEâ”‚â—€â”€â”€â”€â”€â”‚     TRIP     â”‚      â”‚    â”‚
â”‚   â”‚     â”‚              â”‚     â”‚              â”‚     â”‚              â”‚      â”‚    â”‚
â”‚   â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚    â”‚
â”‚   â”‚                                                                      â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                      â”‚                                       â”‚
â”‚                                      â–¼                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚                          DATA LAYER                                 â”‚    â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚
â”‚   â”‚  â”‚   localStorage  â”‚  â”‚     Cookies     â”‚  â”‚   Static Data       â”‚ â”‚    â”‚
â”‚   â”‚  â”‚  (Persistence)  â”‚  â”‚   (Consent)     â”‚  â”‚  (Heritage Sites)   â”‚ â”‚    â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Mermaid Diagram

```mermaid
graph TB
    subgraph "ğŸ¨ Presentation Layer"
        UI[React Components]
        Pages[Page Routes]
        Shadcn[shadcn/ui Components]
    end
    
    subgraph "ğŸ§  Application Logic"
        RecEngine[Recommendation Engine]
        PersonaMgmt[Persona Management]
        TripMgmt[Trip Management]
        EvalFlow[Evaluation Flow]
    end
    
    subgraph "ğŸ“¦ OOUX Core Objects"
        Persona[("ğŸ‘¤ Persona<br/>id, title, traits,<br/>likes, dislikes")]
        Site[("ğŸ›ï¸ Heritage Site<br/>id, name, category,<br/>coordinates, personas")]
        Trip[("ğŸ—ºï¸ Trip<br/>id, sites, dates,<br/>personaId")]
    end
    
    subgraph "ğŸ’¾ Data Layer"
        LocalStorage[(localStorage)]
        Cookies[(Cookies)]
    end
    
    subgraph "ğŸ› ï¸ Tech Stack"
        Vite[Vite + TypeScript]
        Tailwind[Tailwind CSS]
        Router[React Router]
    end
    
    UI --> Pages
    Pages --> Shadcn
    UI --> RecEngine
    UI --> PersonaMgmt
    UI --> TripMgmt
    UI --> EvalFlow
    
    RecEngine --> Persona
    RecEngine --> Site
    PersonaMgmt --> Persona
    TripMgmt --> Trip
    TripMgmt --> Site
    
    Persona --> LocalStorage
    Site --> LocalStorage
    Trip --> LocalStorage
    Persona --> Cookies
    
    Vite --> UI
    Tailwind --> Shadcn
    Router --> Pages
```

---

## Component Architecture

### Feature Component Hierarchy

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        COMPONENT HIERARCHY                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   App.tsx                                                                    â”‚
â”‚   â””â”€â”€ Routes                                                                 â”‚
â”‚       â”œâ”€â”€ Index.tsx (Landing)                                                â”‚
â”‚       â”‚   â”œâ”€â”€ AppHeader                                                      â”‚
â”‚       â”‚   â”œâ”€â”€ HeroSection                                                    â”‚
â”‚       â”‚   â””â”€â”€ BottomNav                                                      â”‚
â”‚       â”‚                                                                      â”‚
â”‚       â”œâ”€â”€ Discover.tsx                                                       â”‚
â”‚       â”‚   â”œâ”€â”€ AppHeader                                                      â”‚
â”‚       â”‚   â”œâ”€â”€ PersonaFilterBar                                               â”‚
â”‚       â”‚   â”‚   â””â”€â”€ GlassPersonaChip (Ã—8)                                      â”‚
â”‚       â”‚   â”œâ”€â”€ SiteGrid                                                       â”‚
â”‚       â”‚   â”‚   â””â”€â”€ SiteCard (Ã—n)                                              â”‚
â”‚       â”‚   â”‚       â””â”€â”€ MatchScoreBadge                                        â”‚
â”‚       â”‚   â””â”€â”€ BottomNav                                                      â”‚
â”‚       â”‚                                                                      â”‚
â”‚       â”œâ”€â”€ Planner.tsx                                                        â”‚
â”‚       â”‚   â”œâ”€â”€ AppHeader                                                      â”‚
â”‚       â”‚   â”œâ”€â”€ TripList                                                       â”‚
â”‚       â”‚   â”‚   â””â”€â”€ TripCard (Ã—n)                                              â”‚
â”‚       â”‚   â”œâ”€â”€ PersonaRecommendations                                         â”‚
â”‚       â”‚   â””â”€â”€ BottomNav                                                      â”‚
â”‚       â”‚                                                                      â”‚
â”‚       â”œâ”€â”€ Profile.tsx                                                        â”‚
â”‚       â”‚   â”œâ”€â”€ AppHeader                                                      â”‚
â”‚       â”‚   â”œâ”€â”€ MyPersonaTile                                                  â”‚
â”‚       â”‚   â”œâ”€â”€ ScheduledVisitsList                                            â”‚
â”‚       â”‚   â”‚   â””â”€â”€ StudyVisitCard (Ã—n)                                        â”‚
â”‚       â”‚   â””â”€â”€ BottomNav                                                      â”‚
â”‚       â”‚                                                                      â”‚
â”‚       â”œâ”€â”€ Onboarding/                                                        â”‚
â”‚       â”‚   â”œâ”€â”€ Onboarding.tsx                                                 â”‚
â”‚       â”‚   â”‚   â””â”€â”€ PersonaCard (Ã—8)                                           â”‚
â”‚       â”‚   â”œâ”€â”€ PersonaQuestionnaire.tsx                                       â”‚
â”‚       â”‚   â”œâ”€â”€ PersonaResults.tsx                                             â”‚
â”‚       â”‚   â””â”€â”€ PersonaConfirmation.tsx                                        â”‚
â”‚       â”‚                                                                      â”‚
â”‚       â””â”€â”€ StudyDashboard.tsx                                                 â”‚
â”‚           â”œâ”€â”€ StudyEnrollment                                                â”‚
â”‚           â”œâ”€â”€ ACUXQuestionnaire                                              â”‚
â”‚           â””â”€â”€ StudyAnalyticsDisplay                                          â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### UI Component Dependencies

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    UI COMPONENT TREE                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   shadcn/ui (Base)                                               â”‚
â”‚   â”œâ”€â”€ Button                                                     â”‚
â”‚   â”œâ”€â”€ Card                                                       â”‚
â”‚   â”œâ”€â”€ Dialog                                                     â”‚
â”‚   â”œâ”€â”€ Dropdown                                                   â”‚
â”‚   â”œâ”€â”€ Form                                                       â”‚
â”‚   â”œâ”€â”€ Input                                                      â”‚
â”‚   â”œâ”€â”€ Select                                                     â”‚
â”‚   â”œâ”€â”€ Tabs                                                       â”‚
â”‚   â”œâ”€â”€ Toast                                                      â”‚
â”‚   â””â”€â”€ Tooltip                                                    â”‚
â”‚                                                                  â”‚
â”‚   Custom Components (Extends shadcn/ui)                          â”‚
â”‚   â”œâ”€â”€ GlassPersonaChip â”€â”€â”€ extends Button                        â”‚
â”‚   â”œâ”€â”€ MatchScoreBadge â”€â”€â”€â”€ extends Badge                         â”‚
â”‚   â”œâ”€â”€ SiteCard â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ extends Card                          â”‚
â”‚   â”œâ”€â”€ PersonaCard â”€â”€â”€â”€â”€â”€â”€â”€ extends Card                          â”‚
â”‚   â”œâ”€â”€ TripCard â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ extends Card                          â”‚
â”‚   â””â”€â”€ StudyVisitCard â”€â”€â”€â”€â”€ extends Card                          â”‚
â”‚                                                                  â”‚
â”‚   Layout Components                                              â”‚
â”‚   â”œâ”€â”€ AppHeader                                                  â”‚
â”‚   â”œâ”€â”€ BottomNav                                                  â”‚
â”‚   â”œâ”€â”€ BurgerMenu                                                 â”‚
â”‚   â””â”€â”€ NotificationDrawer                                         â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Flow Diagrams

### Persona Selection Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PERSONA SELECTION DATA FLOW                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   USER INPUT                         STATE                     STORAGE       â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”€â”€â”€â”€â”€                     â”€â”€â”€â”€â”€â”€â”€       â”‚
â”‚                                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                        â”‚
â”‚   â”‚  Answer Q1-Q5   â”‚                                                        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                        â”‚
â”‚            â”‚                                                                 â”‚
â”‚            â–¼                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚   â”‚  Calculate      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  PersonaScores  â”‚                            â”‚
â”‚   â”‚  Persona Match  â”‚         â”‚  { id: score }  â”‚                            â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚            â”‚                                                                 â”‚
â”‚            â–¼                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚   â”‚  Display Top 3  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  TopPersonas[]  â”‚                            â”‚
â”‚   â”‚  Results        â”‚         â”‚                 â”‚                            â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚            â”‚                                                                 â”‚
â”‚            â–¼                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  User Selects   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ SelectedPersona â”‚â”€â”€â”€â”€â”€â”€â–¶â”‚  localStorage   â”‚  â”‚
â”‚   â”‚  1-2 Personas   â”‚         â”‚                 â”‚       â”‚  + Cookies      â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Recommendation Engine Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    RECOMMENDATION ENGINE DATA FLOW                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   INPUTS                                                                     â”‚
â”‚   â”€â”€â”€â”€â”€â”€                                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚   â”‚  User Persona   â”‚    â”‚  Heritage Sites â”‚    â”‚ Active Filters  â”‚          â”‚
â”‚   â”‚  (from storage) â”‚    â”‚   (static data) â”‚    â”‚  (UI state)     â”‚          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚            â”‚                      â”‚                      â”‚                   â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                   â”‚                                          â”‚
â”‚                                   â–¼                                          â”‚
â”‚   PROCESSING                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                   â”‚         RECOMMENDATION ENGINE           â”‚   â”‚
â”‚                                â”‚                                         â”‚   â”‚
â”‚                                â”‚  1. Load user persona(s)                â”‚   â”‚
â”‚                                â”‚  2. For each site:                      â”‚   â”‚
â”‚                                â”‚     a. Check direct persona match (+50) â”‚   â”‚
â”‚                                â”‚     b. Check category affinity (+35/20) â”‚   â”‚
â”‚                                â”‚     c. Apply rating bonus (+0-15)       â”‚   â”‚
â”‚                                â”‚  3. Calculate matchScore (0-100)        â”‚   â”‚
â”‚                                â”‚  4. Sort by score descending            â”‚   â”‚
â”‚                                â”‚  5. Apply active persona filters        â”‚   â”‚
â”‚                                â”‚                                         â”‚   â”‚
â”‚                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                     â”‚                        â”‚
â”‚                                                     â–¼                        â”‚
â”‚   OUTPUT                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”€â”€â”€â”€â”€â”€                       â”‚            ScoredSite[]                 â”‚   â”‚
â”‚                                â”‚                                         â”‚   â”‚
â”‚                                â”‚  {                                      â”‚   â”‚
â”‚                                â”‚    ...siteData,                         â”‚   â”‚
â”‚                                â”‚    matchScore: number,                  â”‚   â”‚
â”‚                                â”‚    matchedPersonaIds: string[],         â”‚   â”‚
â”‚                                â”‚    isRecommended: boolean               â”‚   â”‚
â”‚                                â”‚  }                                      â”‚   â”‚
â”‚                                â”‚                                         â”‚   â”‚
â”‚                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Recommendation Engine

### Scoring Algorithm

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    MATCH SCORE CALCULATION                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   SCORING FACTORS                        WEIGHT         MAX POINTS           â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                        â”€â”€â”€â”€â”€â”€         â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€           â”‚
â”‚                                                                              â”‚
â”‚   1. Direct Persona Match                               50 points            â”‚
â”‚      â””â”€â–¶ Site.personas.includes(userPersonaId)                               â”‚
â”‚                                                                              â”‚
â”‚   2. High Affinity Category Match                       35 points            â”‚
â”‚      â””â”€â–¶ Site.category in Persona.highAffinityCategories                     â”‚
â”‚                                                                              â”‚
â”‚   3. Medium Affinity Category Match                     20 points            â”‚
â”‚      â””â”€â–¶ Site.category in Persona.mediumAffinityCategories                   â”‚
â”‚                                                                              â”‚
â”‚   4. Rating Bonus                                       0-15 points          â”‚
â”‚      â””â”€â–¶ (Site.rating - 4.0) Ã— 15                                            â”‚
â”‚                                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚   TOTAL                                                 0-100 points         â”‚
â”‚                                                                              â”‚
â”‚   isRecommended = matchScore >= 75                                           â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Category Affinity Matrix

| Persona | High Affinity Categories | Medium Affinity Categories |
|---------|-------------------------|---------------------------|
| ğŸ›ï¸ Archaeologist | Archaeological Site, Museum, Historic District | Fortress, Cultural Experience |
| ğŸ™ Religious Seeker | Religious Site | Historic District, Cultural Experience |
| ğŸ¨ Art Seeker | Museum, Performing Arts, Cultural Experience | Traditional Crafts, Historic District |
| ğŸŒ¿ Naturalist | Traditional Crafts, Maritime Heritage | Cultural Experience, Food Heritage |
| ğŸ· Gourmand | Food Heritage, Cultural Experience | Traditional Crafts, Historic District |
| ğŸ“œ Traditionalist | Traditional Crafts, Historic District, Food Heritage | Religious Site, Cultural Experience |
| ğŸ“¸ Viral Seeker | Cultural Experience, Performing Arts | Fortress, Historic District, Maritime Heritage |
| ğŸŒ… Leisure Seeker | Maritime Heritage, Fortress | Cultural Experience, Food Heritage |

---

## Storage Architecture

### Data Persistence Strategy

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    STORAGE ARCHITECTURE                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                        localStorage                                  â”‚   â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚   â”‚                                                                      â”‚   â”‚
â”‚   â”‚   userPersona          â”‚  PersonaData                               â”‚   â”‚
â”‚   â”‚   personaAssessment    â”‚  PersonaAssessment                         â”‚   â”‚
â”‚   â”‚   scheduledVisits      â”‚  ScheduledVisit[]                          â”‚   â”‚
â”‚   â”‚   studyParticipant     â”‚  StudyParticipant                          â”‚   â”‚
â”‚   â”‚   studyConsent         â”‚  StudyConsent                              â”‚   â”‚
â”‚   â”‚   evaluationResults    â”‚  EvaluationResult[]                        â”‚   â”‚
â”‚   â”‚   tripData             â”‚  Trip[]                                    â”‚   â”‚
â”‚   â”‚   favorites            â”‚  string[] (site IDs)                       â”‚   â”‚
â”‚   â”‚                                                                      â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                          Cookies                                     â”‚   â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚   â”‚                                                                      â”‚   â”‚
â”‚   â”‚   culturapath_consent   â”‚  boolean (cookie consent)                 â”‚   â”‚
â”‚   â”‚   culturapath_persona   â”‚  string (persona ID for cross-session)    â”‚   â”‚
â”‚   â”‚                                                                      â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                        Static Data                                   â”‚   â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚   â”‚                                                                      â”‚   â”‚
â”‚   â”‚   HERITAGE_SITES        â”‚  BaseHeritageSite[] (100 sites)           â”‚   â”‚
â”‚   â”‚   PERSONA_DEFINITIONS   â”‚  PersonaDefinition[] (8 personas)         â”‚   â”‚
â”‚   â”‚                                                                      â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Storage Keys Reference

| Key | Type | Module | Description |
|-----|------|--------|-------------|
| `userPersona` | PersonaData | personaStorage.ts | Primary selected persona |
| `personaAssessment` | PersonaAssessment | personaStorage.ts | Full assessment with all scores |
| `scheduledVisits` | ScheduledVisit[] | visitStorage.ts | Planned heritage visits |
| `studyParticipant` | StudyParticipant | studyStorage.ts | Research participant data |
| `studyConsent` | StudyConsent | studyStorage.ts | Consent form responses |
| `tripData` | Trip[] | tripStorage.ts | Created trips with sites |
| `destinations` | Destination[] | destinationStorage.ts | Saved destinations |
| `evaluations` | Evaluation[] | evaluationStorage.ts | Completed evaluations |

---

## File Structure

```
src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ auth/                    # Authentication components
â”‚   â”‚   â”œâ”€â”€ LoginModal.tsx
â”‚   â”‚   â”œâ”€â”€ ProtectedRoute.tsx
â”‚   â”‚   â””â”€â”€ UserDropdown.tsx
â”‚   â”œâ”€â”€ discover/                # Discovery page components
â”‚   â”‚   â”œâ”€â”€ GlassPersonaChip.tsx
â”‚   â”‚   â”œâ”€â”€ MatchScoreBadge.tsx
â”‚   â”‚   â””â”€â”€ PersonaFilterBar.tsx
â”‚   â”œâ”€â”€ heritage/                # Heritage site components
â”‚   â”‚   â””â”€â”€ SiteCard.tsx
â”‚   â”œâ”€â”€ navigation/              # Navigation components
â”‚   â”‚   â”œâ”€â”€ AppHeader.tsx
â”‚   â”‚   â”œâ”€â”€ BottomNav.tsx
â”‚   â”‚   â”œâ”€â”€ BurgerMenu.tsx
â”‚   â”‚   â””â”€â”€ NotificationDrawer.tsx
â”‚   â”œâ”€â”€ planner/                 # Trip planning components
â”‚   â”‚   â”œâ”€â”€ PersonaRecommendations.tsx
â”‚   â”‚   â””â”€â”€ PersonalizedRecommendations.tsx
â”‚   â”œâ”€â”€ profile/                 # Profile components
â”‚   â”‚   â”œâ”€â”€ MyPersonaTile.tsx
â”‚   â”‚   â”œâ”€â”€ ScheduledVisitsList.tsx
â”‚   â”‚   â””â”€â”€ ScheduleVisit.tsx
â”‚   â”œâ”€â”€ study/                   # Research study components
â”‚   â”‚   â”œâ”€â”€ ACUXQuestionnaire.tsx
â”‚   â”‚   â”œâ”€â”€ StudyDashboard.tsx
â”‚   â”‚   â”œâ”€â”€ StudyEnrollment.tsx
â”‚   â”‚   â””â”€â”€ StudyVisitCard.tsx
â”‚   â””â”€â”€ ui/                      # shadcn/ui base components
â”œâ”€â”€ data/
â”‚   â””â”€â”€ heritageSites.ts         # Static heritage site dataset
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useAuth.tsx              # Authentication hook
â”‚   â”œâ”€â”€ use-mobile.tsx           # Responsive detection
â”‚   â””â”€â”€ useNotifications.tsx     # Toast notifications
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ recommendationEngine.ts  # Persona matching algorithm
â”‚   â”œâ”€â”€ personaStorage.ts        # Persona persistence
â”‚   â”œâ”€â”€ visitStorage.ts          # Visit management
â”‚   â”œâ”€â”€ studyStorage.ts          # Study data
â”‚   â”œâ”€â”€ tripStorage.ts           # Trip data management
â”‚   â””â”€â”€ utils.ts                 # Utility functions
â””â”€â”€ pages/
    â”œâ”€â”€ Index.tsx                # Landing page
    â”œâ”€â”€ Discover.tsx             # Discovery with filtering
    â”œâ”€â”€ Planner.tsx              # Trip planning
    â”œâ”€â”€ Profile.tsx              # User profile
    â”œâ”€â”€ Onboarding.tsx           # Welcome flow
    â”œâ”€â”€ PersonaQuestionnaire.tsx # Assessment
    â”œâ”€â”€ PersonaResults.tsx       # Results display
    â””â”€â”€ StudyDashboard.tsx       # Research tools
```

---

*Architecture documentation for CulturaPath academic research project*
